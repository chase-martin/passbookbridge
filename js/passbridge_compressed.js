var passbridge=function(){function e(){var a=a=document.querySelector("#locationChooser");b(a,0,function(){a.style.display="none";b(c,1)});navigator.userAgent.match(/iPhone/i)?f=window.setInterval(function(){var a=Date.now();void 0!==d&&300<a-d?(window.removeEventListener("touchmove",g,!0),window.clearInterval(f),passCreated.call(),b(c,0,function(){c.style.display="none";h.style.display="block";b(h,1)})):d=Date.now()}):setTimeout(l,2E3);window.addEventListener("touchmove",g,!0);window.setTimeout(function(){a.submit()},
1E3)}function l(){c.style.display="none";i.style.display="block";b(i,1)}function b(a,k,b){void 0!==b&&a.addEventListener("webkitTransitionEnd",function(){b.call()},!1);setTimeout(function(){a.style.opacity=k},1)}function g(a){a.preventDefault()}function j(a){a.target.form["location.zipcode"].value=a.target.form["location.zipcode"].value.replace(/[^0-9]/g,"")}var d,f,c=document.querySelector(".spinner"),h=document.querySelector(".passbook"),i=document.querySelector(".requirements");return window.addEventListener("load",
function(a){for(var b=0,c=["location.zipcode","location.zipcode","location.choose_loc","location.skip","location.create"],a=["focus","blur","change","click","click"],d=[function(a){a.target.form["location.choose_zip"].checked=!0;a.target.form["location.choose_loc"].checked=!1;window.addEventListener("keyup",j,!1)},function(){window.removeEventListener("keyup",j)},function(a){a.target.form["location.zipcode"].value="";document.getElementById("errors").innerHTML=""},function(a){a.target.form["location.skip"].disabled=
"disabled";a.target.form["location.create"].disabled="disabled";for(var b in a.target.form.elements)a.target.form.elements[b].dataset&&"true"==a.target.form.elements[b].dataset.clearOnSkip&&(a.target.form.elements[b].value="");a.target.form["location.skipped"].value="true";e(a.target.form)},function(a){a.preventDefault();var b=a.target.form;b["location.create"].disabled="disabled";b["location.skip"].disabled="disabled";b["location.choose_loc"].checked?navigator.geolocation.getCurrentPosition(function(a){b["location.timestamp"].value=
a.timestamp;b["location.accuracy"].value=a.coords.accuracy;b["location.latitude"].value=a.coords.latitude;b["location.longitude"].value=a.coords.longitude;e()},function(a){b["location.error"]=a;e()}):e()}];b<c.length;document.getElementById(c[b]).addEventListener(a[b],d[b],!1),b++);})}();
